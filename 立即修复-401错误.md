# 🚨 立即修复 401 错误（3 步完成）

## 问题
```
401 Unauthorized - Incorrect API key provided
```

**原因**：Vercel 中的 `OPENAI_API_KEY` 无效、过期或被撤销。

## ✅ 快速修复（3 步）

### 步骤 1: 获取新的 API Key

1. 访问：https://platform.openai.com/api-keys
2. 登录账户
3. 点击 **"Create new secret key"**
4. 复制新生成的 API key（格式：`sk-...`）

### 步骤 2: 在 Vercel 中更新

1. 访问：https://vercel.com/dashboard
2. 选择项目：`life-coach-web`
3. 点击 **Settings** → **Environment Variables**
4. 找到 `OPENAI_API_KEY`，点击 **Edit**
5. 粘贴新的 API key
6. 确保选择所有环境：**Production**、**Preview**、**Development**
7. 点击 **Save**

### 步骤 3: 重新部署

**方法 A：在 Vercel 界面**
1. 点击 **Deployments** 标签
2. 点击最新部署右侧的 **"..."** 菜单
3. 选择 **"Redeploy"**

**方法 B：使用 Git（推荐）**
```bash
git commit --allow-empty -m "Redeploy after updating API key"
git push
```

## ✅ 验证修复

等待部署完成后（状态变为 "Ready"），运行：

```bash
npm run test:api
```

如果看到成功消息，说明已修复！

## ⚠️ 常见问题

**Q: API key 格式是什么？**
A: 应该以 `sk-` 开头，例如：`sk-proj-xxxxxxxxxxxxx`

**Q: 需要等待多久？**
A: 通常 1-3 分钟，部署完成后状态会变为 "Ready"

**Q: 还是出现 401 错误？**
A: 检查：
- API key 是否正确复制（没有多余空格）
- 是否在所有环境中都配置了
- OpenAI 账户是否有余额

---

**详细说明**：查看 `修复401错误-无效API密钥.md`

